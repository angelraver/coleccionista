import{E as p,aj as f,_ as h,B as b,v as s,H as _,q as t,x as o,I as g,w as y,Z as C,F as l,G as a,z as V,y as x}from"./index-e3d7df92.js";import{g as I}from"./VAvatar-4fac2450.js";import{M as v}from"./ModalConfirm-c2edb4d7.js";import{I as n}from"./Item-3e6f00b1.js";import{V as w}from"./VBreadcrumbs-ea277e6f.js";import{b as E,c as B,V as m,a as c,h as U}from"./VRow-43f16261.js";import{V as k}from"./VCard-0793e92c.js";import{o as T,p as F}from"./VBtn-e475a014.js";import"./forwardRefs-e658ad70.js";const L={components:{ModalConfirm:v},data(){var i;return{breadcrumb:[],id:parseInt(this.$route.params.id+""),idUser:parseInt(((i=p())==null?void 0:i.id)+""),item:{},title:"",collection:{},loading:!1,typeLabel:r=>I(r),coverUrl:f}},methods:{async fetchItem(){this.loading=!0;try{const i=await n.fetch(this.idUser,this.id,null);this.item=i[0]}catch(i){console.error(i)}finally{this.loading=!1}},async del(){this.loading=!0;try{await n.remove(this.id,this.idUser),this.$router.push({name:"CollectionDetail",params:{id:this.item.idcollection}})}catch(i){console.error(i)}finally{this.loading=!1}}},async mounted(){await this.fetchItem(),this.breadcrumb=["Colecciones",this.item.collectionname+"",this.item.title],this.item.iditemtype===3?this.title=this.item.title+" - "+this.item.author:this.title=this.item.title}};function M(i,r,N,R,e,d){const u=b("ModalConfirm");return s(),_(g,null,[t(w,{items:e.breadcrumb},null,8,["items"]),t(E,null,{default:o(()=>[t(B,{class:"text-center"},{default:o(()=>[t(m,{class:"justify-center"},{default:o(()=>[t(c,{cols:"auto"},{default:o(()=>[t(k,{width:"400",title:e.title,subtitle:`${e.item.year} | ${e.typeLabel(e.item.iditemtype)}`,text:`Colección ${e.item.collectionname}`},{default:o(()=>[e.item.cover?(s(),y(U,{key:0,width:400,"aspect-ratio":"1/1",cover:"",src:e.coverUrl+e.item.cover},null,8,["src"])):C("",!0)]),_:1},8,["title","subtitle","text"])]),_:1})]),_:1}),t(m,{justify:"center"},{default:o(()=>[t(c,{cols:"auto"},{default:o(()=>[l(V("span",null,[t(u,{buttonOpenText:"Eliminar",buttonOkText:"Eliminar",buttonKoText:"Cancelar",title:`Confirma que deseas eliminar ${e.item.title}`,description:`El item ${e.item.title} será eliminado de la colección ${e.item.collectionname}.`,onAgree:d.del},null,8,["title","description","onAgree"])],512),[[a,e.item.idigdb]]),l(t(T,{onClick:r[0]||(r[0]=j=>i.$router.push({name:"ItemEdit",params:{id:e.id}})),class:"bg-amber ma-4"},{default:o(()=>[t(F,{icon:"mdi-pencil",size:"large"}),x(" Editar ")]),_:1},512),[[a,!e.item.idigdb]])]),_:1})]),_:1})]),_:1})]),_:1})],64)}const Z=h(L,[["render",M]]);export{Z as default};
