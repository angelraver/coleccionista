import{ac as W,ad as D,ae as q,af as A,p as F,P as j,l as G,R as H,e as J,c as m,r as K,T as x,q as i,_ as E,v as s,H as c,F as g,G as v,z as y,x as o,Z as T,I as _,J as L,w as S,y as b,K as f,E as Z,B as Q}from"./index-19990ce3.js";import{I as X}from"./Item-5fe319b1.js";import{V as Y,a as $}from"./VList-72c559b8.js";import{b as M,V,a as C,d as ee,c as te}from"./VRow-3bda51f2.js";import{c as ie,V as oe,d as ne,I as le,g as se}from"./VCard-d045582d.js";import{n as re,o as I,p as U}from"./VBtn-7724ff9f.js";import{m as ae,u as ce,b as B,V as de}from"./VBreadcrumbs-bfde1d72.js";import{f as ue}from"./forwardRefs-e658ad70.js";import{C as me}from"./Collection-3240e1c4.js";import"./index-6c9a59db.js";import"./ssrBoot-ad9a338d.js";const fe={props:{idCollection:{type:Number,required:!0},idUser:{type:Number,required:!0},idItemType:{type:Number,required:!0}},data(){return{loading:!1,items:[],isMobile:!1,coverUrlSmall:W,coverUrlBig:D}},methods:{checkWindowSize(){this.isMobile=window.innerWidth<=768},randomIcon(){return q()},randomColor(){return A().name},async fetchItems(){this.loading=!0;try{this.items=await X.fetch(this.idUser,null,this.idCollection)}catch(e){console.error(e)}finally{this.loading=!1}}},async mounted(){this.items=[],await this.fetchItems(),this.checkWindowSize(),window.addEventListener("resize",this.checkWindowSize)},beforeUnmount(){window.removeEventListener("resize",this.checkWindowSize)}};const pe=F({id:String,text:String,...j(ae({closeOnBack:!1,location:"end",locationStrategy:"connected",eager:!0,minWidth:0,offset:10,openOnClick:!1,openOnHover:!0,origin:"auto",scrim:!1,scrollStrategy:"reposition",transition:!1}),["absolute","persistent"])},"VTooltip"),he=G()({name:"VTooltip",props:pe(),emits:{"update:modelValue":e=>!0},setup(e,r){let{slots:l}=r;const d=H(e,"modelValue"),{scopeId:t}=ce(),u=J(),n=m(()=>e.id||`v-tooltip-${u}`),a=K(),P=m(()=>e.location.split(" ").length>1?e.location:e.location+" center"),z=m(()=>e.origin==="auto"||e.origin==="overlap"||e.origin.split(" ").length>1||e.location.split(" ").length>1?e.origin:e.origin+" center"),N=m(()=>e.transition?e.transition:d.value?"scale-transition":"fade-transition"),R=m(()=>x({"aria-describedby":n.value},e.activatorProps));return re(()=>{const O=B.filterProps(e);return i(B,x({ref:a,class:["v-tooltip",e.class],style:e.style,id:n.value},O,{modelValue:d.value,"onUpdate:modelValue":p=>d.value=p,transition:N.value,absolute:!0,location:P.value,origin:z.value,persistent:!0,role:"tooltip",activatorProps:R.value,_disableGlobalStack:!0},t),{activator:l.activator,default:function(){var k;for(var p=arguments.length,w=new Array(p),h=0;h<p;h++)w[h]=arguments[h];return((k=l.default)==null?void 0:k.call(l,...w))??e.text}})}),ue({},a)}}),ge={key:0},ve={key:1};function ye(e,r,l,d,t,u){return s(),c(_,null,[g(y("p",null,"La colección está vacía.",512),[[v,t.items.length<1]]),l.idItemType!=1?(s(),c("div",ge,[g(i(Y,{lines:"two"},{default:o(()=>[(s(!0),c(_,null,L(t.items,n=>(s(),S($,{key:n.id,title:n.title},{prepend:o(()=>[i(ie,{color:u.randomColor(),icon:u.randomIcon()},null,8,["color","icon"])]),append:o(()=>[i(I,{color:"grey-lighten-1",icon:"mdi-information",variant:"text",onClick:a=>e.$router.push({name:"Item",params:{id:n.id}})},null,8,["onClick"])]),_:2},1032,["title"]))),128))]),_:1},512),[[v,t.items.length>0&&l.idItemType!=1]])])):T("",!0),l.idItemType===1?(s(),c("div",ve,[i(M,{fluid:""},{default:o(()=>[i(V,{dense:""},{default:o(()=>[(s(!0),c(_,null,L(t.items,n=>(s(),S(C,{key:n.id,cols:t.isMobile?4:3},{default:o(()=>[i(oe,{height:t.isMobile?"100px":"280px",onClick:a=>e.$router.push({name:"Item",params:{id:n.id}})},{default:o(()=>[i(ee,{src:(t.isMobile?t.coverUrlSmall:t.coverUrlBig)+n.cover,height:t.isMobile?"100px":"200px",cover:""},null,8,["src","height"]),g(i(ne,null,{default:o(()=>[b(f(n.title),1)]),_:2},1536),[[v,!t.isMobile]]),g(i(he,{activator:"parent",location:"top"},{default:o(()=>[b(f(n.title),1)]),_:2},1536),[[v,t.isMobile]])]),_:2},1032,["height","onClick"])]),_:2},1032,["cols"]))),128))]),_:1})]),_:1})])):T("",!0)],64)}const _e=E(fe,[["render",ye]]),Ve={components:{ItemList:_e},data(){var e;return{id:parseInt(this.$route.params.id+""),idUser:parseInt(((e=Z())==null?void 0:e.id)+""),loading:!1,items:[],collection:{},itemTypes:le,itemTypeLabel:""}},methods:{async fetchCollection(){this.loading=!0;try{const e=await me.fetch(this.idUser,this.id);this.collection=e[0]}catch(e){console.error(e)}finally{this.loading=!1}}},async mounted(){await this.fetchCollection(),this.itemTypeLabel=se(this.collection.iditemtype)}},Ce={class:"text-h4 font-weight-bold text-center"},be={class:"ma-2"},Ie={class:"ma-2"};function we(e,r,l,d,t,u){const n=Q("ItemList");return s(),c(_,null,[i(de,{items:["Colecciones",t.collection.name]},null,8,["items"]),i(M,null,{default:o(()=>[i(te,{class:"text-center"},{default:o(()=>[i(V,{class:"d-flex align-center justify-center"},{default:o(()=>[i(C,null,{default:o(()=>[y("h1",Ce,f(t.collection.name),1),y("p",be,f(t.collection.itemscount)+" ítems",1),y("p",Ie,f(t.itemTypeLabel),1),i(I,{onClick:r[0]||(r[0]=a=>e.$router.push({name:"ItemNew",params:{idCollection:t.collection.id}})),class:"bg-amber mt-2"},{default:o(()=>[i(U,{icon:"mdi-plus",size:"large",start:""}),b(" Nuevo item ")]),_:1})]),_:1})]),_:1}),i(V,{justify:"center"},{default:o(()=>[i(C,null,{default:o(()=>[i(n,{"id-item-type":t.collection.iditemtype,"id-collection":t.id,"id-user":t.idUser},null,8,["id-item-type","id-collection","id-user"])]),_:1})]),_:1}),i(V,{justify:"center"},{default:o(()=>[i(C,null,{default:o(()=>[i(I,{onClick:r[1]||(r[1]=a=>e.$router.push({name:"CollectionEdit",params:{id:t.collection.id}})),class:"bg-amber mt-4"},{default:o(()=>[i(U,{icon:"mdi-pencil",size:"large"}),b(" Editar ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})],64)}const Ne=E(Ve,[["render",we]]);export{Ne as default};
