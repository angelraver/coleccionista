import{p as _e,r as P,c as D,L as H,M as Ke,N as me,O as Pe,P as je,l as Be,Q as Re,s as J,R as se,S as ce,q as l,I as Q,T as ie,U as Ye,y as ze,V as He,W as ye,X as ge,Y as Je,_ as ne,v as E,w as j,x as r,z as O,K as X,B as W,F as Ie,G as Ve,E as Qe,H as We,Z as de}from"./index-e3d7df92.js";import{C as Xe}from"./Collection-ee233449.js";import{I as U}from"./Item-3e6f00b1.js";import{g as Ze,m as $e,b as ae,V as w,a as S,c as fe}from"./VRow-43f16261.js";import{V as et}from"./VForm-4cd00217.js";import{m as tt,u as lt,a as it,b as at,c as nt,d as rt}from"./VSelect-0eabec70.js";import{m as ot,u as ut,V as Z}from"./VTextField-76cdb962.js";import{q as st,n as ct,p as pe,r as dt,o as B}from"./VBtn-e475a014.js";import{f as mt}from"./forwardRefs-e658ad70.js";import{u as ft,V as ht,a as Ce}from"./VList-4b966177.js";import{g as xe,a as be}from"./VAvatar-4fac2450.js";import{M as we}from"./ModalConfirm-c2edb4d7.js";import{V as vt}from"./VBreadcrumbs-ea277e6f.js";import"./index-639e16b7.js";import"./ssrBoot-f0808880.js";import"./VCard-0793e92c.js";function yt(e){const a=e*1e3;return new Date(a).getFullYear()}const gt=async e=>{try{return await(await Ze("/games",[e])).map(t=>({id:t.id,title:t.name,year:yt(t.first_release_date)}))}catch(a){console.error(a)}},pt={fetch:gt},Ct={props:{nameCollection:{type:String,required:!0},idCollection:{type:Number,required:!0},idItemType:{type:Number,required:!0},idUser:{type:Number,required:!0}},data(){return{item:{},loading:!1,gameOptionSelected:null,gameTypedString:"",igdbGameList:[],igdbGame:{}}},computed:{isValid(){return!!this.igdbGame.title&&this.igdbGame.title.length>0}},methods:{async create(){this.loading=!0;const e={idcollection:this.idCollection,iditemtype:this.idItemType,iduser:this.idUser,title:this.igdbGame.titleSimple+"",idigdb:this.igdbGame.id,year:this.igdbGame.year};try{await U.create(e),this.$router.push({name:"CollectionDetail",params:{id:this.idCollection}})}catch(a){console.error(a)}finally{this.loading=!1}},async fetchIgdbGames(e){this.loading=!0;try{const a=await pt.fetch(e);this.igdbGameList=a.map(t=>({id:t.id,title:`${t.title} (${t.year})`,titleSimple:t.title,author:"",year:t.year}))}catch(a){console.error(a)}finally{this.loading=!1}},async handleGameSelected(e){this.gameOptionSelected=e;const a=this.igdbGameList.find(({id:t})=>t===e);this.igdbGame=a?JSON.parse(JSON.stringify(a,null,2)):{}},async handleGameInput(e){e.data?this.gameTypedString=this.gameTypedString+e.data:this.gameTypedString=this.gameTypedString.substring(0,this.gameTypedString.length-1),this.gameTypedString.length>3&&await this.fetchIgdbGames(this.gameTypedString)},clearGameInput(){this.gameTypedString=""}}};const bt=(e,a,t)=>e==null||a==null?-1:e.toString().toLocaleLowerCase().indexOf(a.toString().toLocaleLowerCase()),_t=_e({customFilter:Function,customKeyFilter:Object,filterKeys:[Array,String],filterMode:{type:String,default:"intersection"},noFilter:Boolean},"filter");function It(e,a,t){var h;const v=[],n=(t==null?void 0:t.default)??bt,o=t!=null&&t.filterKeys?me(t.filterKeys):!1,m=Object.keys((t==null?void 0:t.customKeyFilter)??{}).length;if(!(e!=null&&e.length))return v;e:for(let g=0;g<e.length;g++){const[_,V=_]=me(e[g]),c={},u={};let C=-1;if(a&&!(t!=null&&t.noFilter)){if(typeof _=="object"){const R=o||Object.keys(V);for(const M of R){const $=Pe(V,M,V),Y=(h=t==null?void 0:t.customKeyFilter)==null?void 0:h[M];if(C=Y?Y($,a,_):n($,a,_),C!==-1&&C!==!1)Y?c[M]=C:u[M]=C;else if((t==null?void 0:t.filterMode)==="every")continue e}}else C=n(_,a,_),C!==-1&&C!==!1&&(u.title=C);const k=Object.keys(u).length,T=Object.keys(c).length;if(!k&&!T||(t==null?void 0:t.filterMode)==="union"&&T!==m&&!k||(t==null?void 0:t.filterMode)==="intersection"&&(T!==m||!k))continue}v.push({index:g,matches:{...u,...c}})}return v}function Vt(e,a,t,v){const n=P([]),o=P(new Map),m=D(()=>v!=null&&v.transform?H(a).map(g=>[g,v.transform(g)]):H(a));Ke(()=>{const g=typeof t=="function"?t():H(t),_=typeof g!="string"&&typeof g!="number"?"":String(g),V=It(m.value,_,{customKeyFilter:{...e.customKeyFilter,...H(v==null?void 0:v.customKeyFilter)},default:e.customFilter,filterKeys:e.filterKeys,filterMode:e.filterMode,noFilter:e.noFilter}),c=H(a),u=[],C=new Map;V.forEach(k=>{let{index:T,matches:R}=k;const M=c[T];u.push(M),C.set(M.value,R)}),n.value=u,o.value=C});function h(g){return o.value.get(g.value)}return{filteredItems:n,filteredMatches:o,getMatches:h}}function xt(e,a,t){if(a==null)return e;if(Array.isArray(a))throw new Error("Multiple matches is not implemented");return typeof a=="number"&&~a?l(Q,null,[l("span",{class:"v-autocomplete__unmask"},[e.substr(0,a)]),l("span",{class:"v-autocomplete__mask"},[e.substr(a,t)]),l("span",{class:"v-autocomplete__unmask"},[e.substr(a+t)])]):e}const wt=_e({autoSelectFirst:{type:[Boolean,String]},search:String,..._t({filterKeys:["title"]}),...tt(),...je(ot({modelValue:null,role:"combobox"}),["validationValue","dirty","appendInnerIcon"]),...$e({transition:!1})},"VAutocomplete"),St=Be()({name:"VAutocomplete",props:wt(),emits:{"update:focused":e=>!0,"update:search":e=>!0,"update:modelValue":e=>!0,"update:menu":e=>!0},setup(e,a){let{slots:t}=a;const{t:v}=Re(),n=P(),o=J(!1),m=J(!0),h=J(!1),g=P(),_=P(),V=se(e,"menu"),c=D({get:()=>V.value,set:i=>{var s;V.value&&!i&&((s=g.value)!=null&&s.ΨopenChildren)||(V.value=i)}}),u=J(-1),C=D(()=>{var i;return(i=n.value)==null?void 0:i.color}),k=D(()=>c.value?e.closeText:e.openText),{items:T,transformIn:R,transformOut:M}=ft(e),{textColorClasses:$,textColorStyles:Y}=st(C),b=se(e,"search",""),f=se(e,"modelValue",[],i=>R(i===null?[null]:me(i)),i=>{const s=M(i);return e.multiple?s:s[0]??null}),q=ut(),{filteredItems:re,getMatches:Se}=Vt(e,T,()=>m.value?"":b.value),A=D(()=>e.hideSelected?re.value.filter(i=>!f.value.some(s=>s.value===i.value)):re.value),ke=D(()=>f.value.map(i=>i.props.value)),ee=D(()=>{var s;return(e.autoSelectFirst===!0||e.autoSelectFirst==="exact"&&b.value===((s=A.value[0])==null?void 0:s.title))&&A.value.length>0&&!m.value&&!h.value}),oe=D(()=>e.hideNoData&&!T.value.length||e.readonly||(q==null?void 0:q.isReadonly.value)),ue=P(),{onListScroll:Fe,onListKeydown:Te}=lt(ue,n);function Me(i){e.openOnClear&&(c.value=!0),b.value=""}function Ae(){oe.value||(c.value=!0)}function De(i){oe.value||(o.value&&(i.preventDefault(),i.stopPropagation()),c.value=!c.value)}function Ue(i){var K,d,I;if(e.readonly||q!=null&&q.isReadonly.value)return;const s=n.value.selectionStart,y=f.value.length;if((u.value>-1||["Enter","ArrowDown","ArrowUp"].includes(i.key))&&i.preventDefault(),["Enter","ArrowDown"].includes(i.key)&&(c.value=!0),["Escape"].includes(i.key)&&(c.value=!1),ee.value&&["Enter","Tab"].includes(i.key)&&G(A.value[0]),i.key==="ArrowDown"&&ee.value&&((K=ue.value)==null||K.focus("next")),!!e.multiple){if(["Backspace","Delete"].includes(i.key)){if(u.value<0){i.key==="Backspace"&&!b.value&&(u.value=y-1);return}const p=u.value,F=f.value[u.value];F&&!F.props.disabled&&G(F),u.value=p>=y-1?y-2:p}if(i.key==="ArrowLeft"){if(u.value<0&&s>0)return;const p=u.value>-1?u.value-1:y-1;f.value[p]?u.value=p:(u.value=-1,n.value.setSelectionRange((d=b.value)==null?void 0:d.length,(I=b.value)==null?void 0:I.length))}if(i.key==="ArrowRight"){if(u.value<0)return;const p=u.value+1;f.value[p]?u.value=p:(u.value=-1,n.value.setSelectionRange(0,0))}}}function Ge(i){b.value=i.target.value}function Le(i){if(ye(n.value,":autofill")||ye(n.value,":-webkit-autofill")){const s=T.value.find(y=>y.title===i.target.value);s&&G(s)}}function Ne(){var i;o.value&&(m.value=!0,(i=n.value)==null||i.focus())}function Ee(i){o.value=!0,setTimeout(()=>{h.value=!0})}function Oe(i){h.value=!1}function qe(i){(i==null||i===""&&!e.multiple)&&(f.value=[])}const z=J(!1);function G(i){if(e.multiple){const s=f.value.findIndex(y=>e.valueComparator(y.value,i.value));if(s===-1)f.value=[...f.value,i];else{const y=[...f.value];y.splice(s,1),f.value=y}}else f.value=[i],z.value=!0,b.value=i.title,c.value=!1,m.value=!0,ge(()=>z.value=!1)}return ce(o,(i,s)=>{var y;i!==s&&(i?(z.value=!0,b.value=e.multiple?"":String(((y=f.value.at(-1))==null?void 0:y.props.title)??""),m.value=!0,ge(()=>z.value=!1)):(!e.multiple&&!b.value?f.value=[]:ee.value&&!h.value&&!f.value.some(K=>{let{value:d}=K;return d===A.value[0].value})&&G(A.value[0]),c.value=!1,b.value="",u.value=-1))}),ce(b,i=>{!o.value||z.value||(i&&(c.value=!0),m.value=!i)}),ce(c,()=>{if(!e.hideSelected&&c.value&&f.value.length){const i=A.value.findIndex(s=>f.value.some(y=>s.value===y.value));Je&&window.requestAnimationFrame(()=>{var s;i>=0&&((s=_.value)==null||s.scrollToIndex(i))})}}),ct(()=>{const i=!!(e.chips||t.chip),s=!!(!e.hideNoData||A.value.length||t["prepend-item"]||t["append-item"]||t["no-data"]),y=f.value.length>0,K=Z.filterProps(e);return l(Z,ie({ref:n},K,{modelValue:b.value,"onUpdate:modelValue":qe,focused:o.value,"onUpdate:focused":d=>o.value=d,validationValue:f.externalValue,counterValue:f.value.length,dirty:y,onInput:Ge,onChange:Le,class:["v-autocomplete",`v-autocomplete--${e.multiple?"multiple":"single"}`,{"v-autocomplete--active-menu":c.value,"v-autocomplete--chips":!!e.chips,"v-autocomplete--selection-slot":!!t.selection,"v-autocomplete--selecting-index":u.value>-1},e.class],style:e.style,readonly:e.readonly,placeholder:y?void 0:e.placeholder,"onClick:clear":Me,"onMousedown:control":Ae,onKeydown:Ue}),{...t,default:()=>l(Q,null,[l(it,ie({ref:g,modelValue:c.value,"onUpdate:modelValue":d=>c.value=d,activator:"parent",contentClass:"v-autocomplete__content",disabled:oe.value,eager:e.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:e.transition,onAfterLeave:Ne},e.menuProps),{default:()=>[s&&l(ht,{ref:ue,selected:ke.value,selectStrategy:e.multiple?"independent":"single-independent",onMousedown:d=>d.preventDefault(),onKeydown:Te,onFocusin:Ee,onFocusout:Oe,onScrollPassive:Fe,tabindex:"-1",color:e.itemColor??e.color},{default:()=>{var d,I,p;return[(d=t["prepend-item"])==null?void 0:d.call(t),!A.value.length&&!e.hideNoData&&(((I=t["no-data"])==null?void 0:I.call(t))??l(Ce,{title:v(e.noDataText)},null)),l(at,{ref:_,renderless:!0,items:A.value},{default:F=>{var ve;let{item:x,index:L,itemRef:N}=F;const he=ie(x.props,{ref:N,key:L,active:ee.value&&L===0?!0:void 0,onClick:()=>G(x)});return((ve=t.item)==null?void 0:ve.call(t,{item:x,index:L,props:he}))??l(Ce,he,{prepend:te=>{let{isSelected:le}=te;return l(Q,null,[e.multiple&&!e.hideSelected?l(nt,{key:x.value,modelValue:le,ripple:!1,tabindex:"-1"},null):void 0,x.props.prependIcon&&l(pe,{icon:x.props.prependIcon},null)])},title:()=>{var te,le;return m.value?x.title:xt(x.title,(te=Se(x))==null?void 0:te.title,((le=b.value)==null?void 0:le.length)??0)}})}}),(p=t["append-item"])==null?void 0:p.call(t)]}})]}),f.value.map((d,I)=>{function p(N){N.stopPropagation(),N.preventDefault(),G(d)}const F={"onClick:close":p,onMousedown(N){N.preventDefault(),N.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0},x=i?!!t.chip:!!t.selection,L=x?Ye(i?t.chip({item:d,index:I,props:F}):t.selection({item:d,index:I})):void 0;if(!(x&&!L))return l("div",{key:d.value,class:["v-autocomplete__selection",I===u.value&&["v-autocomplete__selection--selected",$.value]],style:I===u.value?Y.value:{}},[i?t.chip?l(dt,{key:"chip-defaults",defaults:{VChip:{closable:e.closableChips,size:"small",text:d.title}}},{default:()=>[L]}):l(rt,ie({key:"chip",closable:e.closableChips,size:"small",text:d.title,disabled:d.props.disabled},F),null):L??l("span",{class:"v-autocomplete__selection-text"},[d.title,e.multiple&&I<f.value.length-1&&l("span",{class:"v-autocomplete__selection-comma"},[ze(",")])])])})]),"append-inner":function(){var F;for(var d=arguments.length,I=new Array(d),p=0;p<d;p++)I[p]=arguments[p];return l(Q,null,[(F=t["append-inner"])==null?void 0:F.call(t,...I),e.menuIcon?l(pe,{class:"v-autocomplete__menu-icon",icon:e.menuIcon,onMousedown:De,onClick:He,"aria-label":v(k.value),title:v(k.value)},null):void 0])}})}),mt({isFocused:o,isPristine:m,menu:c,search:b,filteredItems:re,select:G},n)}}),kt={class:"text-h4 font-weight-bold"};function Ft(e,a,t,v,n,o){return E(),j(ae,null,{default:r(()=>[l(fe,{class:"text-center"},{default:r(()=>[l(w,{class:"d-flex align-center justify-center"},{default:r(()=>[l(S,null,{default:r(()=>[l(et,null,{default:r(()=>[O("h2",kt,"Agregar un Videojuego a la colección "+X(t.nameCollection),1),l(ae,null,{default:r(()=>[l(w,{justify:"center"},{default:r(()=>[l(S,{cols:"8"},{default:r(()=>[l(St,{label:"Buscar un título",modelValue:n.gameOptionSelected,"onUpdate:modelValue":[a[0]||(a[0]=m=>n.gameOptionSelected=m),o.handleGameSelected],items:n.igdbGameList,variant:"outlined","item-text":"title","item-value":"id",onInput:o.handleGameInput,onBlur:o.clearGameInput},null,8,["modelValue","items","onUpdate:modelValue","onInput","onBlur"])]),_:1})]),_:1}),l(w,{justify:"center"},{default:r(()=>[l(S,{cols:"auto"},{default:r(()=>[l(B,{class:"ma-4",text:"Cancelar",onClick:a[1]||(a[1]=m=>e.$router.push({name:"CollectionDetail",params:{id:t.idCollection}}))}),l(B,{disabled:!o.isValid,class:"bg-green ma-4",text:"Guardar",onClick:a[2]||(a[2]=m=>o.create())},null,8,["disabled"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}const Tt=ne(Ct,[["render",Ft]]),Mt={props:{id:{type:Number,required:!1},currentTitle:{type:String,required:!1},nameCollection:{type:String,required:!0},idCollection:{type:Number,required:!0},idItemType:{type:Number,required:!0},idUser:{type:Number,required:!0}},components:{ModalConfirm:we},data(){return{loading:!1,valid:!1,pageTitle:"",title:this.currentTitle||"",typeLabel:e=>xe(e)}},methods:{save(){this.id?this.update():this.create()},async create(){this.loading=!0;try{const e={idcollection:this.idCollection,iditemtype:this.idItemType,iduser:this.idUser,title:this.title};await U.create(e),this.$router.push({name:"CollectionDetail",params:{id:this.idCollection}})}catch(e){console.error(e)}finally{this.loading=!1}},async update(){this.loading=!0;try{await U.update(this.id||0,this.idUser,this.title,"",0),this.$router.push({name:"CollectionDetail",params:{id:this.idCollection}})}catch(e){console.error(e)}finally{this.loading=!1}},async del(){this.loading=!0;try{await U.remove(this.id||0,this.idUser),this.$router.push({name:"CollectionDetail",params:{id:this.idCollection}})}catch(e){console.error(e)}finally{this.loading=!1}},cancel(){this.$router.push({name:"CollectionDetail",params:{id:this.idCollection}})}},computed:{idValid(){return!!this.title&&this.title.length>0}},watch:{currentTitle:{immediate:!0,handler(e){this.title=e}}}},At={class:"text-h4 font-weight-bold text-center"};function Dt(e,a,t,v,n,o){const m=W("ModalConfirm");return E(),j(ae,null,{default:r(()=>[l(fe,{class:"text-center"},{default:r(()=>[l(w,{justify:"center"},{default:r(()=>[l(S,{cols:"18"},{default:r(()=>[O("h1",At,X(t.id?"Editar":"Agregar nuevo item a "+t.nameCollection),1)]),_:1})]),_:1}),l(w,{justify:"center"},{default:r(()=>[l(S,{cols:"8"},{default:r(()=>[l(Z,{modelValue:n.title,"onUpdate:modelValue":a[0]||(a[0]=h=>n.title=h),label:"Título",required:"","hide-details":""},null,8,["modelValue"])]),_:1})]),_:1}),l(w,{class:"justify-center"},{default:r(()=>[l(S,{cols:"8"},{default:r(()=>[O("p",null,X(n.typeLabel(t.idItemType)),1)]),_:1})]),_:1}),l(w,{justify:"center"},{default:r(()=>[l(S,{cols:"auto"},{default:r(()=>[Ie(O("span",null,[l(m,{buttonOpenText:"Eliminar",buttonOkText:"Eliminar",buttonKoText:"Cancelar",title:`Confirma que deseas eliminar ${n.title}`,description:`El item ${n.title} será eliminado de la colección ${t.nameCollection}.`,onAgree:o.del},null,8,["title","description","onAgree"])],512),[[Ve,t.id]]),l(B,{text:"Cancelar",onClick:a[1]||(a[1]=h=>o.cancel()),class:"ma-2"}),l(B,{text:"Guardar",onClick:a[2]||(a[2]=h=>o.save()),class:"bg-green ma-2",disabled:!o.idValid},null,8,["disabled"])]),_:1})]),_:1})]),_:1})]),_:1})}const Ut=ne(Mt,[["render",Dt]]),Gt={props:{id:{type:Number,required:!1},currentTitle:{type:String,required:!1},currentAuthor:{type:String,required:!1},currentYear:{type:Number,required:!1},nameCollection:{type:String,required:!0},idCollection:{type:Number,required:!0},idItemType:{type:Number,required:!0},idUser:{type:Number,required:!0}},components:{ModalConfirm:we},data(){return{loading:!1,valid:!1,pageTitle:"",title:this.currentTitle||"",author:this.currentAuthor||"",year:this.currentYear||0,typeLabel:e=>xe(e)}},methods:{save(){this.id?this.update():this.create()},async create(){this.loading=!0;try{const e={idcollection:this.idCollection,iditemtype:this.idItemType,iduser:this.idUser,title:this.title,author:this.author,year:this.year};await U.create(e),this.$router.push({name:"CollectionDetail",params:{id:this.idCollection}})}catch(e){console.error(e)}finally{this.loading=!1}},async update(){this.loading=!0;try{await U.update(this.id||0,this.idUser,this.title,this.author,this.year),this.$router.push({name:"CollectionDetail",params:{id:this.idCollection}})}catch(e){console.error(e)}finally{this.loading=!1}},async del(){this.loading=!0;try{await U.remove(this.id||0,this.idUser),this.$router.push({name:"CollectionDetail",params:{id:this.idCollection}})}catch(e){console.error(e)}finally{this.loading=!1}},cancel(){this.$router.push({name:"CollectionDetail",params:{id:this.idCollection}})}},computed:{idValid(){return!!this.title&&this.title.length>0}},watch:{currentTitle:{immediate:!0,handler(e){this.title=e}}}},Lt={class:"text-h4 font-weight-bold text-center"};function Nt(e,a,t,v,n,o){const m=W("ModalConfirm");return E(),j(ae,null,{default:r(()=>[l(fe,{class:"text-center"},{default:r(()=>[l(w,{justify:"center"},{default:r(()=>[l(S,{cols:"18"},{default:r(()=>[O("h1",Lt,X(t.id?"Editar":"Agregar nuevo item a "+t.nameCollection),1)]),_:1})]),_:1}),l(w,{justify:"center"},{default:r(()=>[l(S,{cols:"8"},{default:r(()=>[l(Z,{modelValue:n.title,"onUpdate:modelValue":a[0]||(a[0]=h=>n.title=h),label:"Título",required:"","hide-details":""},null,8,["modelValue"])]),_:1})]),_:1}),l(w,{justify:"center"},{default:r(()=>[l(S,{cols:"8"},{default:r(()=>[l(Z,{modelValue:n.author,"onUpdate:modelValue":a[1]||(a[1]=h=>n.author=h),label:"Autor",required:"","hide-details":""},null,8,["modelValue"])]),_:1})]),_:1}),l(w,{class:"justify-center"},{default:r(()=>[l(S,{cols:"8"},{default:r(()=>[O("p",null,X(n.typeLabel(t.idItemType)),1)]),_:1})]),_:1}),l(w,{justify:"center"},{default:r(()=>[l(S,{cols:"auto"},{default:r(()=>[Ie(O("span",null,[l(m,{buttonOpenText:"Eliminar",buttonOkText:"Eliminar",buttonKoText:"Cancelar",title:`Confirma que deseas eliminar ${n.title}`,description:`El item ${n.title} será eliminado de la colección ${t.nameCollection}.`,onAgree:o.del},null,8,["title","description","onAgree"])],512),[[Ve,t.id]]),l(B,{text:"Cancelar",onClick:a[2]||(a[2]=h=>o.cancel()),class:"ma-2"}),l(B,{text:"Guardar",onClick:a[3]||(a[3]=h=>o.save()),class:"bg-green ma-2",disabled:!o.idValid},null,8,["disabled"])]),_:1})]),_:1})]),_:1})]),_:1})}const Et=ne(Gt,[["render",Nt]]),Ot={components:{ItemFormGame:Tt,ItemFormAny:Ut,ItemFormBook:Et},data(){var e;return{breadcrumb:[],id:parseInt(this.$route.params.id+""),idCollection:parseInt(this.$route.params.idCollection+""),idUser:parseInt(((e=Qe())==null?void 0:e.id)+""),idItemType:0,nameCollection:"",item:{},collection:{},code:"",loading:!1}},methods:{async fetchItem(){this.loading=!0;try{const e=await U.fetch(this.idUser,this.id,null);this.item=e[0],this.idCollection=this.item.idcollection,this.idItemType=this.item.iditemtype,this.nameCollection=this.item.collectionname+"",this.code=be(this.item.iditemtype)}catch(e){console.error(e)}finally{this.loading=!1}},async fetchCollection(){this.loading=!0;try{const e=await Xe.fetch(this.idUser,this.idCollection);this.collection=e[0],this.idItemType=this.collection.iditemtype,this.nameCollection=this.collection.name,this.code=be(this.collection.iditemtype)}catch(e){console.error(e)}finally{this.loading=!1}}},async mounted(){this.idCollection&&(await this.fetchCollection(),this.breadcrumb=["Colecciones",this.collection.name,"Item","Nuevo"]),this.id&&(await this.fetchItem(),this.breadcrumb=["Colecciones",this.nameCollection+"",this.item.title,"Editar"])}};function qt(e,a,t,v,n,o){var _,V,c,u,C,k;const m=W("ItemFormGame"),h=W("ItemFormBook"),g=W("ItemFormAny");return E(),We(Q,null,[l(vt,{items:n.breadcrumb},null,8,["items"]),n.code==="videogame"?(E(),j(m,{key:0,"id-collection":n.idCollection,"id-user":n.idUser,"id-item-type":n.idItemType,"name-collection":n.nameCollection},null,8,["id-collection","id-user","id-item-type","name-collection"])):de("",!0),n.code==="book"?(E(),j(h,{key:1,id:(_=n.item)==null?void 0:_.id,"current-title":(V=n.item)==null?void 0:V.title,"current-author":(c=n.item)==null?void 0:c.author,"current-year":(u=n.item)==null?void 0:u.year,"id-collection":n.idCollection,"id-user":n.idUser,"id-item-type":n.idItemType,"name-collection":n.nameCollection},null,8,["id","current-title","current-author","current-year","id-collection","id-user","id-item-type","name-collection"])):de("",!0),n.code!=="videogame"&&n.code!=="book"?(E(),j(g,{key:2,id:(C=n.item)==null?void 0:C.id,"current-title":(k=n.item)==null?void 0:k.title,"id-collection":n.idCollection,"id-user":n.idUser,"id-item-type":n.idItemType,"name-collection":n.nameCollection},null,8,["id","current-title","id-collection","id-user","id-item-type","name-collection"])):de("",!0)],64)}const ll=ne(Ot,[["render",qt]]);export{ll as default};
