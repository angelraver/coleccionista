import{ad as q,ae as A,af as F,ag as j,p as G,Q as H,l as J,S as K,e as Q,c as p,r as X,U,q as o,_ as z,B as k,v as r,w as l,C as b,H as d,I as y,J as _,z as V,x as i,F as C,K as B,y as L,L as h,G as Y}from"./index-cd28b124.js";import{I as Z}from"./Item-de884b8b.js";import{L as N}from"./Loading-cce37143.js";import{V as $,a as ee}from"./VList-aa305d92.js";import{b as P,V as I,a as w,c as te}from"./VResponsive-947568da.js";import{c as oe,V as ie,d as ne,I as re,g as se}from"./VCard-5746e4a2.js";import{n as le,o as x,p as E}from"./VBtn-e0d8352e.js";import{V as ae}from"./VImg-c6111cd0.js";import{m as ce,u as de,a as M}from"./VOverlay-39fd394b.js";import{f as ue}from"./forwardRefs-e658ad70.js";import{C as me}from"./Collection-1bf83a1b.js";import{V as fe}from"./VBreadcrumbs-d209908c.js";import"./index-5e2249b9.js";import"./ssrBoot-45239230.js";const pe={components:{Loading:N},props:{idCollection:{type:Number,required:!0},idUser:{type:Number,required:!0},idItemType:{type:Number,required:!0}},data(){return{loading:!1,items:[],isMobile:!1,coverUrlSmall:q,coverUrlBig:A}},methods:{checkWindowSize(){this.isMobile=window.innerWidth<=768},randomIcon(){return F()},randomColor(){return j().name},async fetchItems(){this.loading=!0;try{this.items=await Z.fetch(this.idUser,null,this.idCollection)}catch(e){console.error(e)}finally{this.loading=!1}}},async mounted(){this.items=[],await this.fetchItems(),this.checkWindowSize(),window.addEventListener("resize",this.checkWindowSize)},beforeUnmount(){window.removeEventListener("resize",this.checkWindowSize)}};const he=G({id:String,text:String,...H(ce({closeOnBack:!1,location:"end",locationStrategy:"connected",eager:!0,minWidth:0,offset:10,openOnClick:!1,openOnHover:!0,origin:"auto",scrim:!1,scrollStrategy:"reposition",transition:!1}),["absolute","persistent"])},"VTooltip"),ge=J()({name:"VTooltip",props:he(),emits:{"update:modelValue":e=>!0},setup(e,a){let{slots:s}=a;const u=K(e,"modelValue"),{scopeId:t}=de(),m=Q(),c=p(()=>e.id||`v-tooltip-${m}`),n=X(),f=p(()=>e.location.split(" ").length>1?e.location:e.location+" center"),R=p(()=>e.origin==="auto"||e.origin==="overlap"||e.origin.split(" ").length>1||e.location.split(" ").length>1?e.origin:e.origin+" center"),O=p(()=>e.transition?e.transition:u.value?"scale-transition":"fade-transition"),W=p(()=>U({"aria-describedby":c.value},e.activatorProps));return le(()=>{const D=M.filterProps(e);return o(M,U({ref:n,class:["v-tooltip",e.class],style:e.style,id:c.value},D,{modelValue:u.value,"onUpdate:modelValue":g=>u.value=g,transition:O.value,absolute:!0,location:f.value,origin:R.value,persistent:!0,role:"tooltip",activatorProps:W.value,_disableGlobalStack:!0},t),{activator:s.activator,default:function(){var S;for(var g=arguments.length,T=new Array(g),v=0;v<g;v++)T[v]=arguments[v];return((S=s.default)==null?void 0:S.call(s,...T))??e.text}})}),ue({},n)}}),ve={key:1},ye={key:0},_e={key:1};function be(e,a,s,u,t,m){const c=k("Loading");return r(),l(C,null,[t.loading?(r(),b(c,{key:0})):d("",!0),t.loading?d("",!0):(r(),l("div",ve,[y(V("p",null,"La colección está vacía.",512),[[_,t.items.length<1]]),s.idItemType!=1?(r(),l("div",ye,[y(o($,{lines:"two"},{default:i(()=>[(r(!0),l(C,null,B(t.items,n=>(r(),b(ee,{key:n.id,title:n.title},{prepend:i(()=>[o(oe,{color:m.randomColor(),icon:m.randomIcon()},null,8,["color","icon"])]),append:i(()=>[o(x,{color:"grey-lighten-1",icon:"mdi-information",variant:"text",onClick:f=>e.$router.push({name:"Item",params:{id:n.id}})},null,8,["onClick"])]),_:2},1032,["title"]))),128))]),_:1},512),[[_,t.items.length>0&&s.idItemType!=1]])])):d("",!0),s.idItemType===1?(r(),l("div",_e,[o(P,{fluid:""},{default:i(()=>[o(I,{dense:""},{default:i(()=>[(r(!0),l(C,null,B(t.items,n=>(r(),b(w,{key:n.id,cols:t.isMobile?4:3},{default:i(()=>[o(ie,{height:t.isMobile?"100px":"280px",onClick:f=>e.$router.push({name:"Item",params:{id:n.id}})},{default:i(()=>[o(ae,{src:(t.isMobile?t.coverUrlSmall:t.coverUrlBig)+n.cover,height:t.isMobile?"100px":"200px",cover:""},null,8,["src","height"]),y(o(ne,null,{default:i(()=>[L(h(n.title),1)]),_:2},1536),[[_,!t.isMobile]]),y(o(ge,{activator:"parent",location:"top"},{default:i(()=>[L(h(n.title),1)]),_:2},1536),[[_,t.isMobile]])]),_:2},1032,["height","onClick"])]),_:2},1032,["cols"]))),128))]),_:1})]),_:1})])):d("",!0)]))],64)}const Ve=z(pe,[["render",be]]),Ce={components:{ItemList:Ve,Loading:N},data(){var e;return{id:parseInt(this.$route.params.id+""),idUser:parseInt(((e=Y())==null?void 0:e.id)+""),breadcrumbs:[],loading:!0,items:[],collection:{},itemTypes:re,itemTypeLabel:"",picture:""}},methods:{async fetchCollection(){this.loading=!0;try{const e=await me.fetch(this.idUser,this.id);this.collection=e[0]}catch(e){console.error(e)}finally{this.loading=!1}}},async mounted(){await this.fetchCollection(),this.itemTypeLabel=se(this.collection.iditemtype),this.breadcrumbs=[{title:"Colecciones",href:"/home"},{title:this.collection.name}]}},Ie={key:1},we={class:"text-h4 font-weight-bold text-center"},Le={class:"ma-2"},ke={class:"ma-2"};function xe(e,a,s,u,t,m){const c=k("Loading"),n=k("ItemList");return r(),l(C,null,[t.loading?(r(),b(c,{key:0})):d("",!0),t.loading?d("",!0):(r(),l("div",Ie,[o(fe,{items:t.breadcrumbs},null,8,["items"]),o(P,null,{default:i(()=>[o(te,{class:"text-center"},{default:i(()=>[o(I,{class:"d-flex align-center justify-center"},{default:i(()=>[o(w,null,{default:i(()=>[V("h1",we,h(t.collection.name),1),V("p",Le,h(t.collection.itemscount)+" ítems",1),V("p",ke,h(t.itemTypeLabel),1),o(x,{onClick:a[0]||(a[0]=f=>e.$router.push({name:"ItemNew",params:{idCollection:t.collection.id}})),class:"bg-amber mt-2"},{default:i(()=>[o(E,{icon:"mdi-plus",size:"large",start:""}),L(" Nuevo item ")]),_:1})]),_:1})]),_:1}),o(I,{justify:"center"},{default:i(()=>[o(w,null,{default:i(()=>[o(n,{"id-item-type":t.collection.iditemtype,"id-collection":t.id,"id-user":t.idUser},null,8,["id-item-type","id-collection","id-user"])]),_:1})]),_:1}),o(I,{justify:"center"},{default:i(()=>[o(w,null,{default:i(()=>[o(x,{onClick:a[1]||(a[1]=f=>e.$router.push({name:"CollectionEdit",params:{id:t.collection.id}})),class:"bg-amber mt-4"},{default:i(()=>[o(E,{icon:"mdi-pencil",size:"large"}),L(" Editar ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]))],64)}const Ae=z(Ce,[["render",xe]]);export{Ae as default};
