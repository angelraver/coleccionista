import{E as p,ad as f,_ as h,B as b,v as r,H as _,q as t,x as o,I as g,w as y,Z as C,F as l,G as a,z as V,y as x}from"./index-19990ce3.js";import{g as I,V as v}from"./VCard-d045582d.js";import{M as w}from"./ModalConfirm-9a484d01.js";import{I as n}from"./Item-5fe319b1.js";import{V as E}from"./VBreadcrumbs-bfde1d72.js";import{b as B,c as U,V as m,a as c,d as k}from"./VRow-3bda51f2.js";import{o as T,p as F}from"./VBtn-7724ff9f.js";import"./forwardRefs-e658ad70.js";const L={components:{ModalConfirm:w},data(){var i;return{breadcrumb:[],id:parseInt(this.$route.params.id+""),idUser:parseInt(((i=p())==null?void 0:i.id)+""),item:{},title:"",collection:{},loading:!1,typeLabel:s=>I(s),coverUrl:f}},methods:{async fetchItem(){this.loading=!0;try{const i=await n.fetch(this.idUser,this.id,null);this.item=i[0]}catch(i){console.error(i)}finally{this.loading=!1}},async del(){this.loading=!0;try{await n.remove(this.id,this.idUser),this.$router.push({name:"CollectionDetail",params:{id:this.item.idcollection}})}catch(i){console.error(i)}finally{this.loading=!1}}},async mounted(){await this.fetchItem(),this.breadcrumb=["Colecciones",this.item.collectionname+"",this.item.title],this.item.iditemtype===3?this.title=this.item.title+" - "+this.item.author:this.title=this.item.title}};function M(i,s,N,R,e,d){const u=b("ModalConfirm");return r(),_(g,null,[t(E,{items:e.breadcrumb},null,8,["items"]),t(B,null,{default:o(()=>[t(U,{class:"text-center"},{default:o(()=>[t(m,{class:"justify-center"},{default:o(()=>[t(c,{cols:"auto"},{default:o(()=>[t(v,{title:e.title,subtitle:`${e.item.year} | ${e.typeLabel(e.item.iditemtype)}`,text:`Colección ${e.item.collectionname}`},{default:o(()=>[e.item.cover?(r(),y(k,{key:0,width:400,"aspect-ratio":"1/1",cover:"",src:e.coverUrl+e.item.cover},null,8,["src"])):C("",!0)]),_:1},8,["title","subtitle","text"])]),_:1})]),_:1}),t(m,{justify:"center"},{default:o(()=>[t(c,{cols:"auto"},{default:o(()=>[l(V("span",null,[t(u,{buttonOpenText:"Eliminar",buttonOkText:"Eliminar",buttonKoText:"Cancelar",title:"Confirma que deseas eliminar",description:`El item ${e.item.title} será eliminado de la colección ${e.item.collectionname}.`,onAgree:d.del},null,8,["description","onAgree"])],512),[[a,e.item.idigdb]]),l(t(T,{onClick:s[0]||(s[0]=D=>i.$router.push({name:"ItemEdit",params:{id:e.id}})),class:"bg-amber ma-2"},{default:o(()=>[t(F,{icon:"mdi-pencil",size:"large"}),x(" Editar ")]),_:1},512),[[a,!e.item.idigdb]])]),_:1})]),_:1})]),_:1})]),_:1})],64)}const S=h(L,[["render",M]]);export{S as default};
