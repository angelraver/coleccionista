import{G as k,ae as w,$ as L,_ as U,B as h,v as s,w as r,C as c,H as l,q as i,x as o,F as p,z as m,L as n,K as E,I as f,J as g,y as B}from"./index-ec70cf82.js";import{g as D,V as _}from"./VCard-69822ef7.js";import{M}from"./ModalConfirm-f7d4cff2.js";import{I as d}from"./Item-470b7969.js";import{L as R}from"./Loading-88873d3a.js";import{V as T}from"./VBreadcrumbs-58fd7af5.js";import{b as F,c as N,V as y,a as b}from"./VResponsive-e0b54abe.js";import{V as I}from"./VImg-258f04ad.js";import{o as A,p as O}from"./VBtn-16eb0950.js";import"./VOverlay-c8a9da50.js";import"./forwardRefs-e658ad70.js";const j={components:{ModalConfirm:M,Loading:R},data(){var t;return{breadcrumbs:[],id:parseInt(this.$route.params.id+""),idUser:parseInt(((t=k())==null?void 0:t.id)+""),item:{},collection:{},images:[],loading:!1,typeLabel:a=>D(a),coverUrl:w,mediaUrl:L}},methods:{async fetchItem(){this.loading=!0;try{const t=await d.fetch(this.idUser,this.id,null);this.item=t[0]}catch(t){console.error(t)}finally{this.loading=!1,this.fetchItemImages()}},async fetchItemImages(){this.loading=!0;try{this.images=await d.fetchImages(this.idUser,this.id)}catch(t){console.error(t)}finally{this.loading=!1}},async del(){this.loading=!0;try{await d.remove(this.id,this.idUser),this.$router.push({name:"CollectionDetail",params:{id:this.item.idcollection}})}catch(t){console.error(t)}finally{this.loading=!1}}},async mounted(){await this.fetchItem(),this.breadcrumbs=[{title:"Colecciones",href:"/home"},{title:this.item.collectionname+"",href:"/collection/"+this.item.idcollection},{title:this.item.title}]}},q={key:1},z={class:"mt-4"},G={key:0},K={key:1};function S(t,a,H,J,e,C){const V=h("Loading"),v=h("ModalConfirm");return s(),r(p,null,[e.loading?(s(),c(V,{key:0})):l("",!0),e.loading?l("",!0):(s(),r("div",q,[i(T,{items:e.breadcrumbs},null,8,["items"]),i(F,null,{default:o(()=>[i(N,{class:"text-center"},{default:o(()=>[i(y,{class:"justify-center"},{default:o(()=>[i(b,{cols:"auto"},{default:o(()=>[i(_,{class:"pl-4 pr-4 pb-4"},{default:o(()=>[m("h1",z,n(e.item.title),1),e.item.author&&e.item.author.length>0?(s(),r("h2",G,"de "+n(e.item.author),1)):l("",!0),e.item.year&&e.item.year>0?(s(),r("p",K,n(e.item.year),1)):l("",!0),m("p",null,"Colección "+n(e.item.collectionname),1),m("p",null,n(e.typeLabel(e.item.iditemtype)),1),e.item.cover?(s(),c(I,{key:2,width:400,"aspect-ratio":"1/1",cover:"",src:e.coverUrl+e.item.cover},null,8,["src"])):l("",!0),(s(!0),r(p,null,E(e.images,(u,x)=>(s(),c(_,{key:x,class:"pa-2 ma-2"},{default:o(()=>[i(I,{width:400,src:`${e.mediaUrl}/${u.name}`},null,8,["src"])]),_:2},1024))),128))]),_:1})]),_:1})]),_:1}),i(y,{justify:"center"},{default:o(()=>[i(b,{cols:"auto"},{default:o(()=>[f(m("span",null,[i(v,{buttonOpenText:"Eliminar",buttonOkText:"Eliminar",buttonKoText:"Cancelar",title:"Confirma que deseas eliminar",description:`El item ${e.item.title} será eliminado de la colección ${e.item.collectionname}.`,onAgree:C.del},null,8,["description","onAgree"])],512),[[g,e.item.idigdb]]),f(i(A,{onClick:a[0]||(a[0]=u=>t.$router.push({name:"ItemEdit",params:{id:e.id}})),class:"bg-amber ma-2"},{default:o(()=>[i(O,{icon:"mdi-pencil",size:"large"}),B(" Editar ")]),_:1},512),[[g,!e.item.idigdb]])]),_:1})]),_:1})]),_:1})]),_:1})]))],64)}const se=U(j,[["render",S]]);export{se as default};
