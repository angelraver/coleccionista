import{E as v,ae as x,$ as w,_ as U,B as E,v as s,H as a,q as i,x as r,I as u,z as n,K as o,L as m,w as h,J as k,F as p,G as f,y as B}from"./index-096889f3.js";import{g as L}from"./ItemType-548fac8d.js";import{M as D}from"./ModalConfirm-fcc11061.js";import{I as c}from"./Item-ae752ac2.js";import{V as M}from"./VBreadcrumbs-0b3069eb.js";import{b as R,c as T,V as g,a as _}from"./VRow-33ca2d49.js";import{V as y}from"./VCard-0cb8d89e.js";import{V as b}from"./VImg-ac69a4dc.js";import{o as F,p as N}from"./VBtn-9acc2f64.js";import"./VOverlay-bfeedc33.js";import"./forwardRefs-e658ad70.js";const A={components:{ModalConfirm:D},data(){var t;return{breadcrumb:[],id:parseInt(this.$route.params.id+""),idUser:parseInt(((t=v())==null?void 0:t.id)+""),item:{},collection:{},images:[],loading:!1,typeLabel:l=>L(l),coverUrl:x,mediaUrl:w}},methods:{async fetchItem(){this.loading=!0;try{const t=await c.fetch(this.idUser,this.id,null);this.item=t[0]}catch(t){console.error(t)}finally{this.loading=!1,this.fetchItemImages()}},async fetchItemImages(){this.loading=!0;try{this.images=await c.fetchImages(this.idUser,this.id)}catch(t){console.error(t)}finally{this.loading=!1}},async del(){this.loading=!0;try{await c.remove(this.id,this.idUser),this.$router.push({name:"CollectionDetail",params:{id:this.item.idcollection}})}catch(t){console.error(t)}finally{this.loading=!1}}},async mounted(){await this.fetchItem(),this.breadcrumb=["Colecciones",this.item.collectionname+"",this.item.title]}},O={class:"mt-4"},j={key:0},q={key:1};function z(t,l,G,K,e,I){const V=E("ModalConfirm");return s(),a(u,null,[i(M,{items:e.breadcrumb},null,8,["items"]),i(R,null,{default:r(()=>[i(T,{class:"text-center"},{default:r(()=>[i(g,{class:"justify-center"},{default:r(()=>[i(_,{cols:"auto"},{default:r(()=>[i(y,{class:"pl-4 pr-4 pb-4"},{default:r(()=>[n("h1",O,o(e.item.title),1),e.item.author&&e.item.author.length>0?(s(),a("h2",j,"de "+o(e.item.author),1)):m("",!0),e.item.year&&e.item.year>0?(s(),a("p",q,o(e.item.year),1)):m("",!0),n("p",null,"Colección "+o(e.item.collectionname),1),n("p",null,o(e.typeLabel(e.item.iditemtype)),1),e.item.cover?(s(),h(b,{key:2,width:400,"aspect-ratio":"1/1",cover:"",src:e.coverUrl+e.item.cover},null,8,["src"])):m("",!0),(s(!0),a(u,null,k(e.images,(d,C)=>(s(),h(y,{key:C,class:"pa-2 ma-2"},{default:r(()=>[i(b,{width:400,src:`${e.mediaUrl}/${d.name}`},null,8,["src"])]),_:2},1024))),128))]),_:1})]),_:1})]),_:1}),i(g,{justify:"center"},{default:r(()=>[i(_,{cols:"auto"},{default:r(()=>[p(n("span",null,[i(V,{buttonOpenText:"Eliminar",buttonOkText:"Eliminar",buttonKoText:"Cancelar",title:"Confirma que deseas eliminar",description:`El item ${e.item.title} será eliminado de la colección ${e.item.collectionname}.`,onAgree:I.del},null,8,["description","onAgree"])],512),[[f,e.item.idigdb]]),p(i(F,{onClick:l[0]||(l[0]=d=>t.$router.push({name:"ItemEdit",params:{id:e.id}})),class:"bg-amber ma-2"},{default:r(()=>[i(N,{icon:"mdi-pencil",size:"large"}),B(" Editar ")]),_:1},512),[[f,!e.item.idigdb]])]),_:1})]),_:1})]),_:1})]),_:1})],64)}const te=U(A,[["render",z]]);export{te as default};
